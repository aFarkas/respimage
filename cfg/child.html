<!DOCTYPE html>
<html>
<head lang="en">
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<title>respimage performance test - responsive images with smallest candidate as fallback src</title>
	<link rel="stylesheet" href="css/bootstrap.min.css" />
	<link rel="stylesheet" href="css/bootstrap-theme.min.css" />
	<style>
		* {
			box-sizing: border-box;
		}

		.thumbnail {
			position: relative;
			display: inline-block;
			vertical-align: top;
			width: 49%;
		}
		.thumbnail-350 {
			width: 350px;
		}

		.dpr-info {
			position: absolute;
			top: 10px;
			left: 10px;
		}

		.thumbnail img {
			width: 100%;
			height: auto;
		}
		.alert-support {
			display: none;
		}

		.respimg .alert-support {
			display: block;
		}

		.alert-save {
			display: none;
		}

	</style>
</head>
<body>
<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
<script>
	window.params = {};
	(function(){

		if(window.HTMLPictureElement){
			$('html').addClass('respimg');
		}
		window.respimgCFG = window.respimgCFG || [];


		location.search.replace(/^\?/, '').split('&').forEach(function(param){
			param = param.split('=');
			params[param[0]] = param[1] || '';
		});

		['lazyFactor', 'xQuant', 'maxX'].forEach(function(cfg){
			if(params[cfg]){
				respimgCFG.push([cfg, params[cfg]]);
			}
		});
	})();
</script>


<div class="alert alert-danger alert-support">
	<p>Your browser does supports respimg natively. Please use a browser <strong>without</strong> picture/srcset support.</p>
</div>
<div class="alert alert-info alert-legend">
	<p>The number on the top are the calculated resolutions for the image:</p>
	<p><span class="label label-success">number in green</span> is the image selected by <strong>respimg</strong>. While <span class="label label-default">number in gray</span> is the next lower and <span class="label label-danger">number in red</span> is the next higher candidate.</p>
	<p>You might see depending on the viewport size, that <strong>respimage</strong> will sometimes take a lower resolution candidate, if the next higher candidate means to much to download.</p>
	<p>Due to the fact that the resource algorithm takes quality vs. performance into account. Most savings occur on higher devicePixelRatio's (i.e.: retina, 1.5+x).</p>
</div>
<div class="alert alert-info alert-save">
	<p>You have either a devicePixelRatio below 1.5 or do simulate such a devicePixelRatio. The smart selection algorithm has it's strength on higher density's (i.e.: 1.5x, 2x or 3x). You can simulate a different pixelRatio by using the xQuant option.</p>
</div>


<div class="thumbnail">
	<img
			sizes="49vw"
			data-low="https://farm5.staticflickr.com/4094/4859138371_9713d4396e_m.jpg"
			data-medium="https://farm5.staticflickr.com/4094/4859138371_9713d4396e_n.jpg"
			srcset="https://farm5.staticflickr.com/4094/4859138371_9713d4396e_m.jpg 240w,
https://farm5.staticflickr.com/4094/4859138371_9713d4396e_n.jpg 320w,
https://farm5.staticflickr.com/4094/4859138371_9713d4396e.jpg 500w,
https://farm5.staticflickr.com/4094/4859138371_9713d4396e_z.jpg 640w,
https://farm5.staticflickr.com/4094/4859138371_9713d4396e_b.jpg 1024w,
https://farm5.staticflickr.com/4094/4859138371_a1b9081485_o.jpg 3648w"
			alt="Abandoned Boat" />
	<div class="caption">
		<h3>Abandoned Boat</h3>
		<p>by <strong>William Warby</strong></p>
	</div>
</div>

<div class="thumbnail">
	<img
			sizes="49vw"
			data-low="https://farm6.staticflickr.com/5531/9638435181_7e3e44c2b8_m.jpg"
			data-medium="https://farm6.staticflickr.com/5531/9638435181_7e3e44c2b8_n.jpg"
			srcset="https://farm6.staticflickr.com/5531/9638435181_7e3e44c2b8_m.jpg 240w,
https://farm6.staticflickr.com/5531/9638435181_7e3e44c2b8_n.jpg 320w,
https://farm6.staticflickr.com/5531/9638435181_7e3e44c2b8.jpg 500w,
https://farm6.staticflickr.com/5531/9638435181_7e3e44c2b8_z.jpg 640w,
https://farm6.staticflickr.com/5531/9638435181_7e3e44c2b8_c.jpg 800w,
https://farm6.staticflickr.com/5531/9638435181_7e3e44c2b8_b.jpg 1024w,
https://farm6.staticflickr.com/5531/9638435181_ecbab20fc0_h.jpg 1600w,
https://farm6.staticflickr.com/5531/9638435181_9da37d35d4_k.jpg 2048w,
https://farm6.staticflickr.com/5531/9638435181_6b5ed94330_o.jpg 3648w"
			alt="Desert Road" />
	<div class="caption">
		<h3>Desert Road</h3>
		<p>by <strong>William Warby</strong></p>
	</div>
</div>
<div class="thumbnail">
	<img
			sizes="49vw"
			data-low="https://farm5.staticflickr.com/4078/5441060528_31db7838ba_m.jpg"
			data-medium="https://farm5.staticflickr.com/4078/5441060528_31db7838ba.jpg"
			srcset="https://farm5.staticflickr.com/4078/5441060528_31db7838ba_m.jpg 240w,
https://farm5.staticflickr.com/4078/5441060528_31db7838ba_n.jpg 320w,
https://farm5.staticflickr.com/4078/5441060528_31db7838ba.jpg 500w,
https://farm5.staticflickr.com/4078/5441060528_31db7838ba_z.jpg 640w,
https://farm5.staticflickr.com/4078/5441060528_31db7838ba_b.jpg 1024w,
https://farm5.staticflickr.com/4078/5441060528_b066ce464a_o.jpg 1932w"
			alt="" />
	<div class="caption">
		<h3></h3>
		<p>by <strong>Micah Sheldon</strong></p>
	</div>
</div>

<div class="thumbnail">
	<img
			sizes="49vw"
			data-low="https://farm9.staticflickr.com/8200/8248153196_7a7664e147_m.jpg"
			data-medium="https://farm9.staticflickr.com/8200/8248153196_7a7664e147_c.jpg"
			srcset="https://farm9.staticflickr.com/8200/8248153196_7a7664e147_m.jpg 240w,
https://farm9.staticflickr.com/8200/8248153196_7a7664e147_n.jpg 320w,
https://farm9.staticflickr.com/8200/8248153196_7a7664e147.jpg 500w,
https://farm9.staticflickr.com/8200/8248153196_7a7664e147_c.jpg 800w,
https://farm9.staticflickr.com/8200/8248153196_7a7664e147_b.jpg 1024w,
https://farm9.staticflickr.com/8200/8248153196_439515a267_h.jpg 1600w,
https://farm9.staticflickr.com/8200/8248153196_891960c5f5_k.jpg 2048w,
https://farm9.staticflickr.com/8200/8248153196_c259fd3d58_o.jpg 9910w"
			alt="@ The Desert Tortoise Natural Area" />
	<div class="caption">
		<h3>@ The Desert Tortoise Natural Area</h3>
		<p>by <strong></strong></p>
	</div>
</div>
<div class="thumbnail">
	<img
			sizes="49vw"
			data-low="https://farm1.staticflickr.com/113/284651694_69e63b374d_m.jpg"
			data-medium="https://farm1.staticflickr.com/113/284651694_69e63b374d_z.jpg"
			srcset="https://farm1.staticflickr.com/113/284651694_69e63b374d_m.jpg 240w,
https://farm1.staticflickr.com/113/284651694_69e63b374d.jpg 500w,
https://farm1.staticflickr.com/113/284651694_69e63b374d_z.jpg 640w,
https://farm1.staticflickr.com/113/284651694_69e63b374d_o.jpg 800w"
			alt="Woman in water" />
	<div class="caption">
		<h3>Woman in water</h3>
		<p>by <strong>Ton Haex</strong></p>
	</div>
</div>

<div class="thumbnail">
	<img
			sizes="49vw"
			data-low="https://farm3.staticflickr.com/2401/2171553538_37d0a133da_m.jpg"
			data-medium="https://farm3.staticflickr.com/2401/2171553538_37d0a133da.jpg"
			srcset="https://farm3.staticflickr.com/2401/2171553538_37d0a133da_m.jpg 240w,
https://farm3.staticflickr.com/2401/2171553538_37d0a133da.jpg 500w,
https://farm3.staticflickr.com/2401/2171553538_37d0a133da_z.jpg?zz=1 640w"
			alt="Borobudur" />
	<div class="caption">
		<h3>Borobudur</h3>
		<p>by <strong>Scott Anderson</strong></p>
	</div>
</div>


<div class="thumbnail">
	<img
			sizes="49vw"
			data-low="https://farm1.staticflickr.com/17/92230866_713ae1eeef_n.jpg"
			data-medium="https://farm1.staticflickr.com/17/92230866_713ae1eeef.jpg"
			srcset="https://farm1.staticflickr.com/17/92230866_713ae1eeef_n.jpg 240w,
https://farm1.staticflickr.com/17/92230866_713ae1eeef.jpg 375w,
https://farm1.staticflickr.com/17/92230866_713ae1eeef_z.jpg 480w,
https://farm1.staticflickr.com/17/92230866_713ae1eeef_b.jpg 768w,
https://farm1.staticflickr.com/17/92230866_713ae1eeef_o.jpg 1536w"
			alt="A tree in the blue" />
	<div class="caption">
		<h3>A tree in the blue</h3>
		<p>by <strong>Sergio</strong></p>
	</div>
</div>

<div class="thumbnail">
	<img
			sizes="49vw"
			data-low="https://farm1.staticflickr.com/192/504251019_ffc94c77b5_n.jpg"
			data-medium="https://farm1.staticflickr.com/192/504251019_ffc94c77b5_z.jpg"
			srcset="https://farm1.staticflickr.com/192/504251019_ffc94c77b5_n.jpg 240w,
https://farm1.staticflickr.com/192/504251019_ffc94c77b5.jpg 375w,
https://farm1.staticflickr.com/192/504251019_ffc94c77b5_z.jpg 480w,
https://farm1.staticflickr.com/192/504251019_ffc94c77b5_b.jpg 768w,
https://farm1.staticflickr.com/192/504251019_af1d042c1a_o.jpg 1944w"
			alt="Windows on Istanbul" />
	<div class="caption">
		<h3>Windows on Istanbul</h3>
		<p>by <strong>robin robokow</strong></p>
	</div>
</div>


<div class="thumbnail">
	<img
			sizes="49vw"
			data-low="https://farm6.staticflickr.com/5139/5546134597_0b19627066_m.jpg"
			data-medium="https://farm6.staticflickr.com/5139/5546134597_0b19627066.jpg"
			srcset="https://farm6.staticflickr.com/5139/5546134597_0b19627066_m.jpg 240w,
https://farm6.staticflickr.com/5139/5546134597_0b19627066_n.jpg 320w,
https://farm6.staticflickr.com/5139/5546134597_0b19627066.jpg 500w,
https://farm6.staticflickr.com/5139/5546134597_0b19627066_z.jpg 640w,
https://farm6.staticflickr.com/5139/5546134597_0b19627066_b.jpg 1024w,
https://farm6.staticflickr.com/5139/5546134597_82084e246c_o.jpg 2844w"
			alt="Goldie Dawn" />
	<div class="caption">
		<h3>Goldie Dawn</h3>
		<p>by <strong></strong></p>
	</div>
</div>

<div class="thumbnail">
	<img
			sizes="49vw"
			data-low="https://farm3.staticflickr.com/2377/1657712955_131576bcd8_m.jpg"
			data-medium="https://farm3.staticflickr.com/2377/1657712955_131576bcd8.jpg"
			srcset="https://farm3.staticflickr.com/2377/1657712955_131576bcd8_m.jpg 240w,
https://farm3.staticflickr.com/2377/1657712955_131576bcd8.jpg 500w,
https://farm3.staticflickr.com/2377/1657712955_131576bcd8_z.jpg?zz=1 640w,
https://farm3.staticflickr.com/2377/1657712955_1b941645fd_o.jpg 800w"
			alt="Sant Miquel del Fai" />
	<div class="caption">
		<h3>Sant Miquel del Fai</h3>
		<p>by <strong>Jaume Meneses</strong></p>
	</div>
</div>

<div class="thumbnail">
	<img
			sizes="49vw"
			data-low="https://farm3.staticflickr.com/2727/4393975099_c212622aa0_m.jpg"
			data-medium="https://farm3.staticflickr.com/2727/4393975099_c212622aa0_n.jpg"
			srcset="https://farm3.staticflickr.com/2727/4393975099_c212622aa0_m.jpg 240w,
https://farm3.staticflickr.com/2727/4393975099_c212622aa0_n.jpg 320w,
https://farm3.staticflickr.com/2727/4393975099_c212622aa0_z.jpg 640w,
https://farm3.staticflickr.com/2727/4393975099_c212622aa0_b.jpg 1024w,
https://farm3.staticflickr.com/2727/4393975099_4413ef4037_o.jpg 1600w"
			alt="Avebury Stone Circle" />
	<div class="caption">
		<h3>Avebury Stone Circle</h3>
		<p>by <strong>Erinc Salor</strong></p>
	</div>
</div>

<div class="thumbnail">
	<img
			sizes="49vw"
			data-low="https://farm4.staticflickr.com/3059/2835191823_e3636abb34_m.jpg"
			data-medium="https://farm4.staticflickr.com/3059/2835191823_e3636abb34_z.jpg"
			srcset="https://farm4.staticflickr.com/3059/2835191823_e3636abb34_m.jpg 240w,
https://farm4.staticflickr.com/3059/2835191823_e3636abb34_n.jpg 320w,
https://farm4.staticflickr.com/3059/2835191823_e3636abb34.jpg 500w,
https://farm4.staticflickr.com/3059/2835191823_e3636abb34_z.jpg 640w,
https://farm4.staticflickr.com/3059/2835191823_e3636abb34_b.jpg 1024w,
https://farm4.staticflickr.com/3059/2835191823_c3bdbcbbee_o.jpg 3028w"
			alt="el castil de tierra" />
	<div class="caption">
		<h3>el castil de tierra</h3>
		<p>by <strong>Mario Antonio Pena Zapater√≠a</strong></p>
	</div>
</div>

<div class="thumbnail">
	<img
			sizes="49vw"
			data-low="https://farm8.staticflickr.com/7356/11122919374_55294abec3_m.jpg"
			data-medium="https://farm8.staticflickr.com/7356/11122919374_55294abec3_n.jpg"
			srcset="https://farm8.staticflickr.com/7356/11122919374_55294abec3_m.jpg 240w,
https://farm8.staticflickr.com/7356/11122919374_55294abec3_n.jpg 320w,
https://farm8.staticflickr.com/7356/11122919374_55294abec3.jpg 500w,
https://farm8.staticflickr.com/7356/11122919374_55294abec3_z.jpg 640w,
https://farm8.staticflickr.com/7356/11122919374_55294abec3_c.jpg 800w,
https://farm8.staticflickr.com/7356/11122919374_55294abec3_b.jpg 1024w,
https://farm8.staticflickr.com/7356/11122919374_dba478083f_h.jpg 1600w,
https://farm8.staticflickr.com/7356/11122919374_237fb819f1_k.jpg 2048w,
https://farm8.staticflickr.com/7356/11122919374_58ccd9e84c_o.jpg 3294w"
			alt="sunset" />
	<div class="caption">
		<h3>sunset</h3>
		<p>by <strong>Angela Marie</strong></p>
	</div>
</div>

<div class="thumbnail">
	<img
			sizes="49vw"
			data-low="https://farm6.staticflickr.com/5506/11122805655_e63cb3a9fc_m.jpg"
			data-medium="https://farm6.staticflickr.com/5506/11122805655_e63cb3a9fc_n.jpg"
			srcset="https://farm6.staticflickr.com/5506/11122805655_e63cb3a9fc_m.jpg 240w,
https://farm6.staticflickr.com/5506/11122805655_e63cb3a9fc_n.jpg 320w,
https://farm6.staticflickr.com/5506/11122805655_e63cb3a9fc.jpg 500w,
https://farm6.staticflickr.com/5506/11122805655_e63cb3a9fc_z.jpg 640w,
https://farm6.staticflickr.com/5506/11122805655_e63cb3a9fc_c.jpg 800w,
https://farm6.staticflickr.com/5506/11122805655_e63cb3a9fc_b.jpg 1024w,
https://farm6.staticflickr.com/5506/11122805655_2992b75835_h.jpg 1600w,
https://farm6.staticflickr.com/5506/11122805655_a6418efdc5_k.jpg 2048w,
https://farm6.staticflickr.com/5506/11122805655_c2bf7d14ea_o.jpg 3008w"
			alt="Sky and earth" />
	<div class="caption">
		<h3>Sky and earth</h3>
		<p>by <strong>Angela Marie</strong></p>
	</div>
</div>

<div class="thumbnail">
	<img
			sizes="49vw"
			data-low="https://farm4.staticflickr.com/3023/2994603808_a3036a3cdf_n.jpg"
			data-medium="https://farm4.staticflickr.com/3023/2994603808_a3036a3cdf.jpg"
			srcset="https://farm4.staticflickr.com/3023/2994603808_a3036a3cdf_n.jpg 240w,
https://farm4.staticflickr.com/3023/2994603808_a3036a3cdf.jpg 375w,
https://farm4.staticflickr.com/3023/2994603808_a3036a3cdf_z.jpg 480w,
https://farm4.staticflickr.com/3023/2994603808_a3036a3cdf_b.jpg 768w,
https://farm4.staticflickr.com/3023/2994603808_8ac98ed34d_o.jpg 3648w"
			alt="Missing Ulsoor lake (Explore)" />
	<div class="caption">
		<h3>Missing Ulsoor lake (Explore)</h3>
		<p>by <strong>Swaminathan</strong></p>
	</div>
</div>


<div class="thumbnail">
	<img
			sizes="49vw"
			data-low="https://farm7.staticflickr.com/6211/6254520191_c7868f3a5d_n.jpg"
			data-medium="https://farm7.staticflickr.com/6211/6254520191_c7868f3a5d.jpg"
			srcset="https://farm7.staticflickr.com/6211/6254520191_c7868f3a5d_n.jpg 227w,
https://farm7.staticflickr.com/6211/6254520191_c7868f3a5d.jpg 354w,
https://farm7.staticflickr.com/6211/6254520191_c7868f3a5d_z.jpg 453w,
https://farm7.staticflickr.com/6211/6254520191_c7868f3a5d_b.jpg 725w,
https://farm7.staticflickr.com/6211/6254520191_6878432c01_o.jpg 3407w"
			alt="Oxford Path 2" />
	<div class="caption">
		<h3>Oxford Path 2</h3>
		<p>by <strong>Danny Chapman</strong></p>
	</div>
</div>

<script>
	(function(){
		var known = {low: 'low', medium: 'medium'};
		var strategy = window.params.src || 'low';
		var attr = known[strategy];
		if(attr){
			$('img').attr('src', function(){
				return this.getAttribute('data-'+ attr);
			});
		}
	})();
</script>

<script src="../respimage.dev.js"></script>
<script src="../plugins/intrinsic-dimension/ri.intrinsic.js"></script>
<script>

	(function(){

		var timer;
		var _ = window.respimage._;
		var dpr = _.DPR;
		var showdpr = function(){
			var set, beforeCandidate, afterCandidate, curCandidate;
			var info = '<div class="dpr-info">';
			var img = this;
			var imgData = this[_.ns];
			if(!imgData || !imgData.curCan){return;}
			beforeCandidate = '<strong class="label label-default">--</strong>';
			afterCandidate = '<strong class="label label-danger">--</strong>';
			curCandidate = '<strong class="label label-success">' + (Math.floor(imgData.curCan.res * 1000) / 1000);

			if(imgData.curCan.url == imgData.src){
				curCandidate += ' (initial @src)';
			}

			curCandidate += '</strong>';

			set = imgData.curCan.set;
			for(var i = 0; i < set.cands.length; i++){
				if( imgData.curCan.res > set.cands[i].res ){
					beforeCandidate = '<strong class="label label-default">' + (Math.floor(set.cands[i].res * 1000) / 1000);
					if(set.cands[i].url == imgData.src){
						beforeCandidate += ' (initial @src)';
					}
					beforeCandidate += '</strong>';
				} else if( imgData.curCan.res < set.cands[i].res ){
					afterCandidate = '<strong class="label label-danger">' + (Math.floor(set.cands[i].res * 1000) / 1000);
					if(set.cands[i].url == imgData.src){
						afterCandidate += ' (initial @src)';
					}
					afterCandidate += '</strong>';
					break;
				}
			}

			info += beforeCandidate +' '+ curCandidate +' ' + afterCandidate;

			info += '</div>';
			$(img)
				.parent()
				.find('.dpr-info')
				.remove()
				.end()
				.append(info)
			;
		};

		var showDprs = function(){
			$('img').each(showdpr);
		};
		var tShowDprs = function(){
			clearTimeout(timer);
			timer = setTimeout(showDprs, 200);
		};
		window.respimage();
		if(_.DPR < 1.3){
			$('.alert-save').show();
		}
		$('<p><strong class="label label-danger">Real/Simulated pixel ratio of your device: '+ (_.DPR) +'x</strong></p>')
				.prependTo('body');
		document.addEventListener('load', tShowDprs, true);
		window.addEventListener('resize', tShowDprs);
		showDprs();
	})();

</script>
</body>
</html>
